<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TNE Digital - {{user.name}}</title>
    <!-- Todo tu CSS actual permanece igual -->
    <style>
        /* Mant√©n todo tu CSS actual aqu√≠ */
        /* ... */
    </style>
</head>
<body>
    <div class="container">
        <div class="tne-card">
            <div class="pattern-bg"></div>
            <div class="glass-overlay"></div>
            <div class="scan-line"></div>
            
            <div class="tne-header">
                <div class="logo-section">
                    <div class="chile-flag">
                        <div class="flag-blue">
                            <div class="flag-star">‚òÖ</div>
                        </div>
                        <div class="flag-white"></div>
                        <div class="flag-red"></div>
                    </div>
                    <div class="tne-title">TNE DIGITAL</div>
                </div>
                
                <div class="tech-indicators">
                    <div class="nfc-indicator">NFC</div>
                    <div class="chip"></div>
                </div>
            </div>
            
            <div class="tne-content">
                <div class="photo-section">
                    <div class="student-photo">
                        <div class="photo-overlay"></div>
                        <!-- Aqu√≠ se mostrar√° la foto del usuario o placeholder -->
                        <img id="userPhoto" src="" alt="Foto Estudiante" style="display: none;">
                        <span id="photoPlaceholder">üë§</span>
                    </div>
                </div>
                
                <div class="info-section">
                    <div class="student-name" id="studentName">CARGANDO...</div>
                    <div class="student-rut" id="studentRut">---.---.---.-</div>
                    <div class="institution-info" id="institutionName">Instituci√≥n Educativa</div>
                    <div class="career-info" id="careerInfo">Carrera/Nivel</div>
                    <div class="validity-info">V√°lida hasta: <span id="validityYear">2025</span></div>
                </div>
            </div>
            
            <div class="status-bar"></div>
        </div>
    </div>

    <script>
        // üéØ FUNCI√ìN PRINCIPAL PARA ADALO
        function loadUserData() {
            // Obtener par√°metros de la URL que env√≠a Adalo
            const urlParams = new URLSearchParams(window.location.search);
            
            // Extraer todos los datos del usuario
            const userData = {
                name: urlParams.get('name') || urlParams.get('nombres') || 'NOMBRE ESTUDIANTE',
                lastName: urlParams.get('apellidos') || urlParams.get('lastname') || '',
                rut: urlParams.get('rut') || '12.345.678-9',
                institution: urlParams.get('institucion') || urlParams.get('institution') || 'Instituci√≥n Educativa',
                career: urlParams.get('carrera') || urlParams.get('career') || 'Carrera/Nivel',
                level: urlParams.get('nivel') || urlParams.get('level') || '',
                photo: urlParams.get('photo') || urlParams.get('foto') || '',
                year: urlParams.get('year') || urlParams.get('a√±o') || '2025'
            };
            
            // Actualizar la TNE con los datos
            updateTNECard(userData);
        }
        
        // üîÑ FUNCI√ìN PARA ACTUALIZAR LA TARJETA
        function updateTNECard(userData) {
            // Actualizar nombre completo
            const fullName = `${userData.name} ${userData.lastName}`.trim().toUpperCase();
            document.getElementById('studentName').textContent = fullName;
            
            // Actualizar RUT
            document.getElementById('studentRut').textContent = userData.rut;
            
            // Actualizar instituci√≥n
            document.getElementById('institutionName').textContent = userData.institution;
            
            // Actualizar carrera/nivel
            const careerText = userData.level ? `${userData.career} - ${userData.level}` : userData.career;
            document.getElementById('careerInfo').textContent = careerText;
            
            // Actualizar a√±o de vigencia
            document.getElementById('validityYear').textContent = userData.year;
            
            // Manejar foto del usuario
            const userPhoto = document.getElementById('userPhoto');
            const photoPlaceholder = document.getElementById('photoPlaceholder');
            
            if (userData.photo && userData.photo !== '') {
                userPhoto.src = userData.photo;
                userPhoto.style.display = 'block';
                photoPlaceholder.style.display = 'none';
            } else {
                userPhoto.style.display = 'none';
                photoPlaceholder.style.display = 'block';
            }
            
            // Animaci√≥n de carga completada
            setTimeout(() => {
                document.querySelector('.tne-card').style.opacity = '1';
            }, 300);
        }
        
        // üöÄ INICIALIZAR CUANDO CARGA LA P√ÅGINA
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
        });
        
        // üéÆ INTERACTIVIDAD (mant√©n tu c√≥digo actual)
        const card = document.querySelector('.tne-card');
        
        card.addEventListener('touchstart', function(e) {
            this.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1.02)';
        });
        
        card.addEventListener('touchend', function(e) {
            this.style.transform = 'perspective(1000px) rotateX(5deg) rotateY(-5deg) scale(1)';
        });
        
        card.addEventListener('mousemove', function(e) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const rotateX = (y - centerY) / 10;
            const rotateY = (centerX - x) / 10;
            
            this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'perspective(1000px) rotateX(5deg) rotateY(-5deg) scale(1)';
        });
        
        console.log('TNE Digital 2025 - Conectada con Adalo! üî•');
    </script>
</body>
</html>
